var Comment=React.createClass({displayName:"Comment",render:function(){return React.createElement("div",{className:"comment"},React.createElement("div",{className:"commentAuthor"},this.props.author),React.createElement("div",{className:"tip"},this.props.children))}}),CommentList=React.createClass({displayName:"CommentList",render:function(){var e=this.props.data.map(function(e){return React.createElement(Comment,{author:e.author},e.text)});return React.createElement("div",{className:"commentList"},e)}}),CommentForm=React.createClass({displayName:"CommentForm",handleClick:function(e){e.preventDefault();var t=this.refs.author.getDOMNode().value,a=this.refs.text.getDOMNode().value;(0!=t.length||0!=a.length)&&this.handleCommentSubmit({author:t,text:a}),this.refs.author.value="",this.refs.text.value=""},handleCommentSubmit:function(e){$.ajax({url:"/commit?name="+e.author+"&talk="+e.text,type:"post",dataType:"json",cache:!1,success:function(e){if(0==e.code){React.findDOMNode(this.refs.forms)}}.bind(this),error:function(e,t,a){console.error(this.props.url,t,a.toString())}.bind(this)})},render:function(){return React.createElement("div",{className:"commentForm",ref:"forms"},React.createElement("div",{className:"commentTitle"},"发表评论"),React.createElement("label",{"for":""},"用户名："),React.createElement("input",{className:"username",type:"text",placeholder:"Your name",ref:"author"}),React.createElement("textarea",{className:"saySome",type:"text",placeholder:"Say something...",ref:"text"}),React.createElement("a",{href:"javascript:;",className:"postSays",ref:"post",onClick:this.handleClick},"提交"))}}),CommentBox=React.createClass({displayName:"CommentBox",getInitialState:function(){return{data:[{author:"西泊浪人",text:"晚上吃面条"},{author:"约翰逊",text:"中午吃多了。略撑"}]}},loadCommentsFromServer:function(){$.ajax({url:"/comment",type:"post",dataType:"json",cache:!1,success:function(e){this.setState({data:e.result})}.bind(this),error:function(e,t,a){console.error(this.props.url,t,a.toString())}.bind(this)})},componentDidMount:function(){this.loadCommentsFromServer()},render:function(){return React.createElement("div",{className:"commentBox",ref:"commentbox"},React.createElement("div",{className:"chartTitle"},"评论列表"),React.createElement(CommentList,{data:this.state.data}),React.createElement(CommentForm,null))}});React.render(React.createElement(CommentBox,null),document.getElementById("commentList"));